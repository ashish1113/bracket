$("#btn").click((function(){$("#brackets").html("");var e=$("#notinput").val(),a=$("#nopinput").val(),m=0,r=_.find([2,4,8,16,32,64],(function(a){return a>=e})),t=[{teamId:"Team A",Score:"20"},{teamId:"Team B",Score:"02"},{teamId:"Team C",Score:"22"},{teamId:"Team D",Score:"03"},{teamId:"Team E",Score:"43"},{teamId:"Team F",Score:"34"},{teamId:"Team G",Score:"04"},{teamId:"Team H",Score:"05"},{teamId:"Team I",Score:"06"},{teamId:"Team J",Score:"07"},{teamId:"Team K",Score:"08"},{teamId:"Team L",Score:"09"},{teamId:"Team M",Score:"10"},{teamId:"Team N",Score:"11"},{teamId:"Team O",Score:"12"},{teamId:"Team P",Score:"10"},{teamId:"Team Q",Score:"13"},{teamId:"Team R",Score:"15"},{teamId:"Team S",Score:"16"},{teamId:"Team T",Score:"17"},{teamId:"Team U",Score:"18"},{teamId:"Team V",Score:"19"},{teamId:"Team W",Score:"21"},{teamId:"Team X",Score:"23"},{teamId:"Team Y",Score:"24"},{teamId:"Team Z",Score:"25"},{teamId:"Team AA",Score:"26"},{teamId:"Team AB",Score:"27"},{teamId:"Team AC",Score:"28"},{teamId:"Team AD",Score:"29"},{teamId:"Team AE",Score:"30"},{teamId:"Team AF",Score:"31"},{teamId:"Team AG",Score:"32"},{teamId:"Team AH",Score:"33"},{teamId:"Team AI",Score:"35"},{teamId:"Team AJ",Score:"36"},{teamId:"Team AK",Score:"37"},{teamId:"Team AL",Score:"38"},{teamId:"Team AM",Score:"39"},{teamId:"Team AN",Score:"40"},{teamId:"Team AO",Score:"41"},{teamId:"Team AP",Score:"42"},{teamId:"Team AQ",Score:"43"},{teamId:"Team AR",Score:"44"},{teamId:"Team AS",Score:"45"},{teamId:"Team AT",Score:"46"},{teamId:"Team AU",Score:"47"},{teamId:"Team AV",Score:"48"},{teamId:"Team AW",Score:"49"},{teamId:"Team AX",Score:"50"},{teamId:"Team AY",Score:"51"},{teamId:"Team AZ",Score:"52"},{teamId:"Team BA",Score:"53"},{teamId:"Team BB",Score:"54"},{teamId:"Team BC",Score:"55"},{teamId:"Team BD",Score:"56"},{teamId:"Team BE",Score:"57"},{teamId:"Team BF",Score:"58"},{teamId:"Team BG",Score:"59"},{teamId:"Team BH",Score:"60"},{teamId:"Team BI",Score:"61"},{teamId:"Team BJ",Score:"62"},{teamId:"Team BK",Score:"63"},{teamId:"Team BL",Score:"64"}];if(1==$("input[type='checkbox']").prop("checked")){t=[{teamId:"",Score:"1"},{teamId:"",Score:"2"},{teamId:"",Score:"1"},{teamId:"",Score:"2"},{teamId:"",Score:"1"},{teamId:"",Score:"7"},{teamId:"",Score:"1"},{teamId:"",Score:"2"},{teamId:"",Score:"1"},{teamId:"",Score:"6"},{teamId:"",Score:"1"},{teamId:"",Score:"2"},{teamId:"",Score:"1"},{teamId:"",Score:"32"},{teamId:"",Score:"1"},{teamId:"",Score:"2"},{teamId:"",Score:"1"},{teamId:"",Score:"4"},{teamId:"",Score:"1"},{teamId:"",Score:"2"},{teamId:"",Score:"1"},{teamId:"",Score:"24"},{teamId:"",Score:"1"},{teamId:"",Score:"2"},{teamId:"",Score:"1"},{teamId:"",Score:"42"},{teamId:"",Score:"1"},{teamId:"",Score:"2"},{teamId:"",Score:"1"},{teamId:"",Score:"22"}];for(var o=$("textarea").val().split("\n"),c=0;c<o.length;c++)t[c].teamId=o[c]}!function(o){var d=r-o;d>0&&(o=r);var I=[],S=1,s=o/2,n=o/2,p=0,T=o/2;for(c=1;c<=o-1;c++){var l=c/s,i=!1,v=0,A=0;d>0&&(c%2!=0||d>=s-c)&&(i=!0,d--);var u=_.map(_.filter(I,(function(e){return e.nextGame==c})),(function(e){return{game:e.bracketNo,teams:e.teamnames,score:e.scores}}));for(i?I.push({lastGames:1==S?null:[u[0].game,u[1].game],nextGame:T+c>o-1?null:T+c,teamnames:1==S?[t[p].teamId,t[p].teamId]:[u[0].teams[goAhead],u[1].teams[goAhead]],scores:1==S?[t[p].Score,t[p].Score]:[u[0].score[v],u[1].score[A]],bracketNo:c,roundNo:S,bye:i}):(0!=u.length&&(u[0].score[0]<u[0].score[1]&&(v=1),u[1].score[0]<u[1].score[1]&&(A=1)),I.push({lastGames:1==S?null:[u[0].game,u[1].game],nextGame:T+c>o-1?null:T+c,teamnames:1==S?[t[p].teamId,t[p+1].teamId]:[u[0].teams[v],u[1].teams[A]],scores:1==S?[t[p].Score,t[p+1].Score]:[u[0].score[v],u[1].score[A]],bracketNo:c,roundNo:S,bye:i})),i?p++:p+=2,c%2!=0&&T--;l>=1;)S++,l=c/(s+=n/=2)}!function(t){var o=_.uniq(_.map(t,(function(e){return e.roundNo}))).length,c=$('<div class="group'+(o+1)+'" id="b'+m+'"></div>'),d=_.groupBy(t,(function(e){return e.roundNo}));for(g=1;g<=o;g++){var I=[];I[0]=parseInt(r/(4*a));for(var S=$('<div class="r'+g+'"></div>'),s=0;s<d[g].length;s++){if(1==g&&e>4&&a>1&&(4!=a||8!=e))for(var n=1;n<=a;n++){var p=r*n/(2*a);I[n]=I[n-1]+r/(2*a),1==g&&s==I[n-1]&&S.append('<p class="pe">Pool '+n+"</p>"),1==g&&s==p&&S.append('<rect class="pre"></rect>')}var T=d[g][s];2==a&&0==s&&1==g&&4==e?S.append('<p class="pa">Pool 1</p>'):2==a&&1==s&&1==g&&4==e&&S.append('<p class="pb">Pool 2</p>'),4==a&&0==s&&1==g&&8==e&&S.append('<p class="pa">Pool 1</p>');for(var l=1;l<4;l++)4==a&&s==l&&1==g&&8==e&&S.append('<p class="pb">Pool '+(l+1)+"</p>");a>1&&1==s&&1==g&&4==e&&S.append('<rect class="pre"></rect>'),S.append(T.bye?"<div></div>":'<div><div class="bracketbox"><span class="info1">'+T.scores[0]+'</span><span class="info2">'+T.scores[1]+'</span><span class="teama">'+T.teamnames[0]+'</span><span class="teamb">'+T.teamnames[1]+"</span></div></div>")}c.append(S)}c.append('<div class="r'+(o+1)+'"><div class="final"><div class="bracketbox"><span class="teamc">'+_.last(t).teamnames[_.random(1)]+"</span></div></div></div>"),$("#brackets").append(c),m++,$("html,body").animate({scrollTop:$("#b"+(m-1)).offset().top})}(I)}(e),$("span.teama,span.teamb,span.teamc").click((function(){for(var a=$(this).text(),m=0;m<e;m++)t[m].teamId==a&&alert("Team Name: "+t[m].teamId+"\nTeam Score: "+t[m].Score)}))}));